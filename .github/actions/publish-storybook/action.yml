name: publish-storybook
description: Publish storybook

inputs:
  major_version:
    description: "Major version"
    required: true

runs:
  using: "composite"
  steps:
    - name: Publish storybook to ${{ inputs.major_version }}'s folder of S3 bucket
      run: |
        TARGETDIR="s3://centreon-storybook/${{ inputs.major_version }}"
        aws s3 rm --recursive "$TARGETDIR"
        aws s3 cp --recursive "storybook/" "$TARGETDIR"
      shell: bash

    - name: Publish storybook to lastest folder of S3 bucket
      if: ${{ github.ref_name == 'develop' }}
      run: |
        TARGETDIR="s3://centreon-storybook/latest"
        aws s3 rm --recursive "$TARGETDIR"
        aws s3 cp --recursive "storybook/" "$TARGETDIR"
      shell: bash