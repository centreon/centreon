name: "set-veracode-baseline-in-cache"
description: "Cache baseline by version for pipeline's diff usage"
inputs:
  module_name:
    description: Module name
    required: true
  target_branch_name:
    description: The target maintenance branch
    required: true

runs:
  using: "composite"
  steps:
    - name: Cache baseline file
      run: |
        TARGET_S3="s3://centreon-veracode-reports/${{ inputs.module_name }}/${{ inputs.target_branch_name }}/results.json"
        BASELINE_FILE="/tmp/results.json"
        aws s3 cp "$BASELINE_FILE" "$TARGET_S3"
      shell: bash

