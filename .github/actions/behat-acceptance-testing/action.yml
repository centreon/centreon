name: "Behat Acceptance Testing"
description: "Behat Acceptance Testing"

inputs:
  project:
    description: "project"
    required: true
  distr:
    description: "distr"
    required: true
  version:
    description: "version"
    required: true
  behat_image_version:
    description: "version"
    required: true
runs:
  using: "composite"

  steps:
    - name: "Run Behat"
      run: docker run --shm-size 2gb -i -e PROJECT=${{ inputs.project }} -e DISTR=${{ inputs.distr }} -e VERSION=${{ inputs.version }} -v "$PWD:/tmp" -v "/var/run/docker.sock:/var/run/docker.sock" -w "/tmp" --entrypoint "/tmp/ci/scripts/behat-acceptance-testing.sh" --net="host" docker.registry.apps.centreon.com/behat:${{ inputs.behat_image_version }}
      shell: bash