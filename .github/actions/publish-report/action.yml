name: "tag version"
description: "Tag package"
inputs:
  check_name:
    description: "Name of the check and comment"
    default: "${{ github.job }}-report"
  junit_files:
    description: "Path to the junit files"
    required: true
runs:
  using: "composite"
  steps:
    - name: Publish report
      id: publish-report
      uses: EnricoMi/publish-unit-test-result-action@v2
      with:
        check_name: "${{ inputs.check_name }}"
        comment_mode: failures
        compare_to_earlier_commit: false
        ignore_runs: true
        check_run_annotations: none
        job_summary: false
        junit_files: "${{ inputs.junit_files }}"

    - run: cat "${{ inputs.junit_files }}" | grep -E -i '<testsuite\s+.+failures="[1-9]|<failure\s+'
      shell: bash
