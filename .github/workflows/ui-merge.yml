name: centreon-ui-merge

on:
  workflow_dispatch:
  pull_request:
    types:
      - closed
    paths:
      - "centreon/packages/ui/**"
      - ".github/workflows/ui-merge.yml"

jobs:
  clean-up-npm-beta:
    runs-on: ubuntu-22.04
    if: github.event.pull_request.merged == true

    steps:
      - uses: actions/checkout@v3

      - uses: ./.github/actions/clean-up-npm-tag
        with:
          package: ui
          npm_token: ${{ secrets.NPM_TOKEN }}